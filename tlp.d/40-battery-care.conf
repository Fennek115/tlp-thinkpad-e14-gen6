# ==============================================================================
# TLP Drop-in Configuration: Battery Care (Cuidado de Batería)
# ==============================================================================
# Archivo: /etc/tlp.d/40-battery-care.conf
# Propósito: Configuración de umbrales de carga para prolongar vida útil
# Última modificación: 2026-02-16
# ==============================================================================
#
# Este archivo configura los umbrales de carga de la batería de tu ThinkPad.
# Limitar la carga máxima ayuda a prolongar significativamente la vida útil
# de las baterías de ión-litio.
#
# IMPORTANTE: Estas configuraciones aplican a TODOS los modos (AC, BAT, SAV)
# porque son configuraciones de hardware de la batería, no de consumo de energía.
#
# ==============================================================================

# ------------------------------------------------------------------------------
# Explicación: ¿Por qué limitar la carga?
# ------------------------------------------------------------------------------
#
# Las baterías de ión-litio se degradan más rápido cuando se mantienen
# constantemente al 100% de carga, especialmente si además están expuestas
# a altas temperaturas. La química de la batería sufre más estrés en los
# extremos del rango de carga (muy baja o muy alta).
#
# Al limitar la carga máxima al 80% y comenzar a cargar solo cuando baja
# del 75%, reduces el estrés en la batería y puedes extender su vida útil
# de ~500 ciclos a potencialmente ~1000-1500 ciclos.
#
# TRADE-OFF: Sacrificas un 20% de capacidad inmediata (de 100% a 80%)
# pero a cambio tu batería mantiene su capacidad efectiva por mucho más tiempo.
#
# Matemática simple:
#   - Sin límites: 100% de capacidad por 2-3 años, luego degradación rápida
#   - Con límites 75-80%: 80% de capacidad por 4-6 años con degradación lenta
#
# ------------------------------------------------------------------------------

# ------------------------------------------------------------------------------
# Configuración de Umbrales para BAT0 (Batería Principal)
# ------------------------------------------------------------------------------

# Umbral de inicio de carga (START_CHARGE_THRESH)
# La carga comenzará cuando el nivel de batería baje POR DEBAJO de este valor
# y el cargador esté conectado.
START_CHARGE_THRESH_BAT0=75

# Umbral de detención de carga (STOP_CHARGE_THRESH)
# La carga se detendrá cuando el nivel de batería alcance o supere este valor.
STOP_CHARGE_THRESH_BAT0=80

# ------------------------------------------------------------------------------
# Explicación de los valores elegidos (75-80%)
# ------------------------------------------------------------------------------
#
# Rango 75-80%: Este es un buen compromiso que recomiendo para la mayoría
# de usuarios. Te da una ventana de carga/descarga de 5% (lo suficiente
# para evitar ciclos excesivos) mientras mantienes un buen 80% de capacidad
# disponible.
#
# ALTERNATIVAS según tu caso de uso:
#
# Opción 1: Máxima longevidad (60-70%)
#   START_CHARGE_THRESH_BAT0=60
#   STOP_CHARGE_THRESH_BAT0=70
#   Pro: Máxima vida útil de la batería (potencialmente 2000+ ciclos)
#   Contra: Solo tienes 70% de capacidad disponible
#   Cuándo: Si casi siempre trabajas conectado a AC y raramente necesitas
#           toda la capacidad de la batería
#
# Opción 2: Balance estándar (75-80%) ← ACTUAL
#   START_CHARGE_THRESH_BAT0=75
#   STOP_CHARGE_THRESH_BAT0=80
#   Pro: Buen balance entre longevidad y capacidad disponible
#   Contra: Ninguno significativo
#   Cuándo: Para la mayoría de usuarios que trabajan parcialmente conectados
#           y parcialmente en batería
#
# Opción 3: Máxima capacidad (90-100%)
#   START_CHARGE_THRESH_BAT0=90
#   STOP_CHARGE_THRESH_BAT0=100
#   Pro: Tienes toda la capacidad de la batería disponible
#   Contra: Vida útil de batería reducida (~500-800 ciclos)
#   Cuándo: Si frecuentemente necesitas usar toda la capacidad de la batería
#           y planeas reemplazar la laptop en 2-3 años de todas formas
#
# ------------------------------------------------------------------------------

# ------------------------------------------------------------------------------
# Restauración de umbrales al desconectar AC
# ------------------------------------------------------------------------------

# Algunos ThinkPads restablecen los umbrales cuando desconectas el AC.
# Esta configuración los restaura automáticamente cuando desconectas el cargador.
# Generalmente no es necesario en ThinkPads modernos, pero no hace daño tenerlo.
#RESTORE_THRESHOLDS_ON_BAT=1

# ------------------------------------------------------------------------------
# Batería Secundaria (BAT1)
# ------------------------------------------------------------------------------
#
# Tu ThinkPad E14 Gen 6 tiene una sola batería interna, por lo que estas
# configuraciones están comentadas. Si en el futuro agregas una batería
# externa o slice battery, puedes descomentar y configurar estos valores.
#
#START_CHARGE_THRESH_BAT1=75
#STOP_CHARGE_THRESH_BAT1=80

# ==============================================================================
# Verificación de la Configuración
# ==============================================================================
#
# Para verificar que los umbrales estén aplicados correctamente:
#
#   sudo tlp-stat -b
#
# Deberías ver algo como:
#
#   /sys/class/power_supply/BAT0/charge_control_start_threshold =  75 [%]
#   /sys/class/power_supply/BAT0/charge_control_end_threshold   =  80 [%]
#
# Si ves "not available", significa que tu hardware no soporta esta función
# (poco probable en un ThinkPad moderno) o que el módulo del kernel no está
# cargado correctamente.
#
# ==============================================================================
#
# NOTA IMPORTANTE: Comportamiento de Carga
# ==============================================================================
#
# Con esta configuración:
#
# 1. Si conectas el cargador con batería al 90%:
#    → No pasará nada, la batería se mantendrá al 90% (ya está sobre 80%)
#    → El sistema se alimenta directamente de AC
#
# 2. Si conectas el cargador con batería al 70%:
#    → La batería comenzará a cargar (está bajo 75%)
#    → Se detendrá al llegar a 80%
#
# 3. Si desconectas el cargador con batería al 80%:
#    → La batería comienza a descargarse normalmente
#    → Si vuelves a conectar antes de llegar a 75%, no cargará
#
# Esto es NORMAL y es el comportamiento deseado. No es un bug.
# La idea es evitar ciclos de carga innecesarios cuando estás conectado
# a AC la mayor parte del tiempo.
#
# ==============================================================================
